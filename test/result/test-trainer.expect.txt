======== #1 source in trainer#eval() ========

no source specified
{ x = 3, tr.eval() } .. 3
{ x = 5, tr.eval() } .. 3
x is specified as a source
{ x = 7, tr.eval() } .. 7
{ x = 9, tr.eval() } .. 9

======== #2 trainer#eval() ========

a + b
{ a = 3, b = 5, tr.eval() } .. 8
a - b
{ a = 3, b = 5, tr.eval() } .. -2
a * b
{ a = 3, b = 5, tr.eval() } .. 15
a / b
{ a = 3, b = 5, tr.eval() } .. 0.6
a |.| b
{ a = 3, b = 5, tr.eval() } .. 15

======== #3 dot-product ========

------------------------------------------------------------------------------
model .. x |*| g
x.shape .. [5, 5]
g .. <gear@conv2d:filter_num=none:channel_num=none:size=(2,2):strides=(1,1):padding=valid:channel_pos=none>
x.tostring(cond(g.channel_pos == `last, 2, 1)) ..
{{0, 0, 0, 0, 1},
 {0, 0, 1, 1, 0},
 {1, 1, 1, 0, 0},
 {0, 1, 0, 0, 1},
 {1, 1, 0, 1, 1}}
g.array.tostring(cond(g.channel_pos == `last, 2, 1)) ..
{{1, 0},
 {0, 0}}
== OK ==
strDirect ..
{{0, 0, 0, 0},
 {0, 0, 1, 1},
 {1, 1, 1, 0},
 {0, 1, 0, 0}}
strTrainer ..
{{0, 0, 0, 0},
 {0, 0, 1, 1},
 {1, 1, 1, 0},
 {0, 1, 0, 0}}
------------------------------------------------------------------------------
model .. x |*| g
x.shape .. [5, 5]
g .. <gear@conv2d:filter_num=4:channel_num=none:size=(2,2):strides=(1,1):padding=valid:channel_pos=none>
x.tostring(cond(g.channel_pos == `last, 2, 1)) ..
{{0, 0, 0, 0, 1},
 {0, 0, 1, 1, 0},
 {1, 1, 1, 0, 0},
 {0, 1, 0, 0, 1},
 {1, 1, 0, 1, 1}}
g.array.tostring(cond(g.channel_pos == `last, 2, 1)) ..
{{{1, 0},
  {0, 0}},

 {{1, 0},
  {1, 0}},

 {{0, 0},
  {1, 0}},

 {{1, 1},
  {0, 0}}}
== OK ==
strDirect ..
{{{0, 0, 0, 0}, {0, 0, 0, 0}, {0, 1, 1, 0}, {0, 1, 1, 1}},
 {{0, 1, 1, 0}, {0, 1, 1, 1}, {1, 2, 1, 2}, {1, 1, 0, 1}},
 {{1, 1, 0, 2}, {1, 2, 1, 2}, {1, 1, 0, 1}, {0, 0, 0, 0}},
 {{0, 1, 1, 1}, {1, 2, 1, 1}, {0, 0, 0, 0}, {0, 1, 1, 1}}}
strTrainer ..
{{{0, 0, 0, 0}, {0, 0, 0, 0}, {0, 1, 1, 0}, {0, 1, 1, 1}},
 {{0, 1, 1, 0}, {0, 1, 1, 1}, {1, 2, 1, 2}, {1, 1, 0, 1}},
 {{1, 1, 0, 2}, {1, 2, 1, 2}, {1, 1, 0, 1}, {0, 0, 0, 0}},
 {{0, 1, 1, 1}, {1, 2, 1, 1}, {0, 0, 0, 0}, {0, 1, 1, 1}}}
------------------------------------------------------------------------------
model .. x |*| g
x.shape .. [5, 5, 3]
g .. <gear@conv2d:filter_num=none:channel_num=3:size=(2,2):strides=(1,1):padding=valid:channel_pos=last>
x.tostring(cond(g.channel_pos == `last, 2, 1)) ..
{{{0, 0, 0}, {0, 1, 0}, {0, 1, 1}, {0, 1, 1}, {1, 0, 0}},
 {{0, 1, 0}, {0, 1, 1}, {1, 0, 1}, {1, 1, 0}, {0, 0, 1}},
 {{0, 1, 0}, {0, 0, 1}, {0, 1, 1}, {0, 0, 1}, {0, 1, 0}},
 {{0, 1, 1}, {1, 0, 0}, {1, 0, 1}, {1, 0, 0}, {0, 0, 0}},
 {{0, 1, 1}, {1, 1, 1}, {1, 0, 1}, {0, 0, 1}, {0, 0, 1}}}
g.array.tostring(cond(g.channel_pos == `last, 2, 1)) ..
{{{0, 0, 1}, {0, 1, 1}},
 {{1, 1, 1}, {0, 1, 0}}}
== OK ==
strDirect ..
{{3, 4, 6, 3},
 {3, 4, 4, 3},
 {3, 4, 4, 3},
 {4, 4, 3, 1}}
strTrainer ..
{{3, 4, 6, 3},
 {3, 4, 4, 3},
 {3, 4, 4, 3},
 {4, 4, 3, 1}}
x ..
{{{0, 0, 0, 0, 1},
  {0, 0, 1, 1, 0},
  {1, 1, 1, 0, 0},
  {0, 1, 0, 0, 1},
  {1, 1, 0, 1, 1}},

 {{1, 0, 0, 0, 1},
  {0, 1, 0, 0, 0},
  {1, 0, 1, 1, 0},
  {0, 1, 0, 1, 0},
  {0, 1, 1, 1, 0}},

 {{0, 1, 0, 1, 1},
  {0, 0, 0, 0, 0},
  {0, 1, 1, 1, 1},
  {1, 1, 0, 1, 0},
  {0, 1, 0, 0, 1}}}
------------------------------------------------------------------------------
model .. x |*| g
x.shape .. [3, 5, 5]
g .. <gear@conv2d:filter_num=none:channel_num=3:size=(2,2):strides=(1,1):padding=valid:channel_pos=first>
x.tostring(cond(g.channel_pos == `last, 2, 1)) ..
{{{0, 0, 0, 0, 1},
  {0, 0, 1, 1, 0},
  {1, 1, 1, 0, 0},
  {0, 1, 0, 0, 1},
  {1, 1, 0, 1, 1}},

 {{1, 0, 0, 0, 1},
  {0, 1, 0, 0, 0},
  {1, 0, 1, 1, 0},
  {0, 1, 0, 1, 0},
  {0, 1, 1, 1, 0}},

 {{0, 1, 0, 1, 1},
  {0, 0, 0, 0, 0},
  {0, 1, 1, 1, 1},
  {1, 1, 0, 1, 0},
  {0, 1, 0, 0, 1}}}
g.array.tostring(cond(g.channel_pos == `last, 2, 1)) ..
{{{0, 0},
  {1, 0}},

 {{1, 1},
  {1, 1}},

 {{1, 0},
  {1, 0}}}
== OK ==
strDirect ..
{{2, 2, 1, 3},
 {3, 4, 4, 2},
 {3, 5, 4, 4},
 {4, 6, 3, 4}}
strTrainer ..
{{2, 2, 1, 3},
 {3, 4, 4, 2},
 {3, 5, 4, 4},
 {4, 6, 3, 4}}
