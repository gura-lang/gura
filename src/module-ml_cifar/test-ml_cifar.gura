#!/usr/bin/env gura
import(helper.test) {*}
import(ml.cifar)
import(arrayt)

toascii(array:array) = {
	lst = array.tolist()
	lst.fold(32):iter {|row|
		choose(row * 4, ' ', '.', ':', '*', '*').join() + '|'
	}.join('\n')
}

pathNameArc = 'sample/cifar-10-binary.tar.gz'
testcase {
	ml.cifar.cifar10(path.join(pathNameArc, 'cifar-10-batches-bin/data_batch_1.bin')) {|db|
		printf('nimages:%d nrows:%d ncols:%d\n', db.nimages, db.nrows, db.ncols)
		arrImage = db.imgtoarray(`flat)
		println(toascii(arrImage[1][0]))
	}
}
