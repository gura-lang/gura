#!/usr/bin/env gura
import(midi)

midi.device {|dev|
	println(dev)
	//dev.mmlplay('@10')
	repeat(128) {|i|
		dev.rawwrite(0xc0, i)
		dev.mmlplay('aab2 aab2 ab>c<b ab8a8f2')
	}
	//dev.mmlplay('ecef ee8c8<b2 >ab>c<b ab8a8f2')
	//dev.mmlplay('ecef ee8c8<b2 >aab2 aab2 r1')
	/*
	dev.rawwrite(0x40, 100)
	repeat(128) {|i|
		dev.rawwrite(0xc0, i)
		repeat(5) {|i|
			dev.rawwrite(0x90, 60 + i, 0x40)
			//dev.rawwrite(0x90, 60 + i + 1, 0x40)
			//dev.rawwrite(0x90, 60 + i + 2, 0x40)
			time.sleep(.2)
			dev.rawwrite(0x90, 60 + i, 0x00)
			//dev.rawwrite(0x90, 60 + i + 1, 0x00)
			//dev.rawwrite(0x90, 60 + i + 2, 0x00)
		}
	}
	*/
}
