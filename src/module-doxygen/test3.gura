#!/usr/bin/env gura
import(doxygen)

doc = R'''
/*! Unconditionally shown documentation.
 *  \if Cond1
 *    Only included if Cond1 is set.
 *  \endif
 *  \if Cond2
 *    Only included if Cond2 is set.
 *    \if Cond3
 *      Only included if Cond2 and Cond3 are set.
 *    \endif
 *    More text.
 *  \endif
 *  Unconditional text.
 */
'''

doc = R'''
/*! \english
 *  This is English.
 *  \endenglish
 *  \dutch
 *  Dit is Nederlands.
 *  \enddutch
 */
'''

doc1 = R'''
/*! \class Par_Test
 * Normal text.
 *
 * \par User defined paragraph:
 * Contents of the paragraph.
 *
 * \par
 * New paragraph under the same heading.
 *
 * \note
 * This note consists of two paragraphs.
 * This is the first paragraph.
 *
 * \par
 * And this is the second paragraph.
 *
 * More normal text. 
 */
'''

doc = R'''
/*! \file structcmd.h
    \brief A Documented file.
    
    Details.
*/
/*! \def MAX(a,b)
    \brief A macro that returns the maximum of \a a and \a b.
   
    Details.
*/
/*! \var typedef unsigned int UINT32
    \brief A type definition for a .
    
    Details.
*/
/*! \var int errno
    \brief Contains the last error code.
    \warning Not thread safe!
*/
/*! \fn int open(const char *pathname,int flags)
    \brief Opens a file descriptor.
    \param pathname The name of the descriptor.
    \param flags Opening flags.
*/
/*! \fn int close(int fd)
    \brief Closes the file descriptor \a fd.
    \param fd The descriptor to close.
*/
/*! \fn size_t write(int fd,const char *buf, size_t count)
    \brief Writes \a count bytes from \a buf to the filedescriptor \a fd.
    \param fd The descriptor to write to.
    \param buf The data buffer to write.
    \param count The number of bytes to write.
*/
/*! \fn int read(int fd,char *buf,size_t count)
    \brief Read bytes from a file descriptor.
    \param fd The descriptor to read from.
    \param buf The buffer to read into.
    \param count The number of bytes to read.
*/
'''

doc = R'''
/*! \brief Brief description.
 *         Brief description continued.
 *
 *  Detailed description starts here.
 */

/// Brief description.
/** Detailed description. */

/// Brief description.
/** Detailed description. */

//! Brief description.

//! Detailed description 
//! starts here.

//! Brief description, which is
//! really a detailed description since it spans multiple lines.
/*! Another detailed description!
 */
'''

doc1 = R'''
int var; /*!< Detailed description after the member */
'''

doxygen.document(doc.reader()) {|doc|
	doc.structures {|structure|
		println(cond(structure.refahead, '<<<<', '----'))
		structure.elems()::print(1)
	}
}
