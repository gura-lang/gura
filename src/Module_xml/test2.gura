#!/usr/bin/env gura
import(xml)

scope {
	e = xml.element
	c = xml.comment
	doc = xml.document()
	doc.root = e('hoge', attr => 'aaa', attr_2 => 'bbb') {
		e('foo') {
			'text'
			e('bar')
			'fjdkfjdsjfkldsj fjdkjfdsa fjdskfjds fjkfdsjfkds'
			e('bar')
			e('bar')
			e('bar')
			e('bar')
			c('This is a comment text')
			e('bar') {
				e('hoge')
				e('hoge')
				e('hoge')
				e('hoge')
				e('hoge')
			}
			e('bar')
			e('bar' + (1..10))
		}
		e('foo')
	}
	doc.root.addchild(e('foo2'))
	doc.root.addchild([e('foo3'), e('foo4'), e('foo5'), 'text-added'])
	doc.root << e('foo2')
	doc.root << [e('foo3'), e('foo4'), e('foo5'), 'text-added']
	try {
		doc.root.addchild(2)
	} except {|e|
		println('expected error occurs: ', e.text)
	}
	try {
		doc.root << 3
	} except {|e|
		println('expected error occurs: ', e.text)
	}
	println('== result output ==')
	doc.write(sys.stdout, fancy => true)
}
