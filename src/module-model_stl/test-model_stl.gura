#!/usr/bin/env gura
import(helper.test) {*}
import(model.stl)

testcase {
	ratio = 0.05
	//reader1 = model.stl.reader('cube-ascii.stl')
	//reader2 = model.stl.reader('cube-binary.stl')
	//println(reader1)
	//println(reader1, '\n', reader2)
	//fileName = 'cube-ascii.stl'
	fileName = 'Voyager_17.stl'
	model.stl.reader(fileName) {|facet|
		printf('glNormal3d(%g, %g, %g)\n', facet.normal.x, facet.normal.y, facet.normal.z)
		printf('glVertex3d(%g, %g, %g)\n', facet.vertex1.x * ratio, facet.vertex1.y * ratio, facet.vertex1.z * ratio)
		printf('glVertex3d(%g, %g, %g)\n', facet.vertex2.x * ratio, facet.vertex2.y * ratio, facet.vertex2.z * ratio)
		printf('glVertex3d(%g, %g, %g)\n', facet.vertex3.x * ratio, facet.vertex3.y * ratio, facet.vertex3.z * ratio)
	}
	//println(reader.solidname)
	//println(reader)
}
