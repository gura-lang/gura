#!/usr/bin/env gura
import(midi)

channel = 0
velocity = 0x40
notes = [0, 2, 4, 5, 7, 9, 11, 12] + 12 * 5
midi.port {|port|
	println(port)
	midi.programs.each {|name, program|
		printf('Program: %s(%d)\n', name, program)
		port.program_change(channel, program)
		notes.each {|note|
			port.note_on(channel, note, velocity)
			time.sleep(.2)
			port.note_on(channel, note, 0)
		}
	}
}
