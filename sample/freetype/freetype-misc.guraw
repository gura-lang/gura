#!/usr/bin/env gura
# encoding: utf-8
import(tk)
import(jpeg)
import(freetype)

I(filename:string) = path.join(sys.datadir, 'sample', 'resource', filename)
scope {
	img = image(I('Winter.jpg'))
	//img = image(`rgb, 640, 480, `gray)
	ctx = freetype.Context(freetype.sysfontpath('msgothic.ttc'), 1)
	ctx.setheight(64).setcolor(`red)
	img.drawtext(ctx, (0..10) * 50 - 100, (0 ..10) * 64 - 25, 'あいうえお Hello world')
	ctx.setcolor(`white)
	img.drawtext(ctx, 0, 200, 'ゴシック体文字重ね合わせ')
	ctx.setcolor(`gray)
	str = '重ね合わせ その2'
	bbox = ctx.calcbbox(0, 260, str)
	img.fillrect(bbox*, `white)
	ctx.drawtext(img, 0, 260, str)
	//img.write('>test.png')
	img.show()
}
